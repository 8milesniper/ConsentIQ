1. Instruction

Tell Replit:

“Add this diagnostic endpoint into server/routes.ts, redeploy, then visit https://www.consentiq.tech/api/env-check. It will show which environment variables are set or missing in production. At the same time, make sure the following keys and values are entered in Deployment → Secrets.”

2. Code to Add (server/routes.ts)
// Diagnostic endpoint to check deployment environment variables
app.get("/api/env-check", (req, res) => {
  res.json({
    DATABASE_URL: process.env.DATABASE_URL ? "✅ SET" : "❌ MISSING",
    JWT_SECRET: process.env.JWT_SECRET ? "✅ SET" : "❌ MISSING",
    STRIPE_SECRET_KEY: process.env.STRIPE_SECRET_KEY ? "✅ SET" : "❌ MISSING",
    STRIPE_PRICE_ID: process.env.STRIPE_PRICE_ID ? "✅ SET" : "❌ MISSING",
    STRIPE_ANNUAL_PRICE_ID: process.env.STRIPE_ANNUAL_PRICE_ID ? "✅ SET" : "❌ MISSING",
    VITE_STRIPE_PUBLIC_KEY: process.env.VITE_STRIPE_PUBLIC_KEY ? "✅ SET" : "❌ MISSING",
    SUPABASE_URL: process.env.SUPABASE_URL ? "✅ SET" : "❌ MISSING",
    SUPABASE_SERVICE_ROLE_KEY: process.env.SUPABASE_SERVICE_ROLE_KEY ? "✅ SET" : "❌ MISSING",
    FRONTEND_URL: process.env.FRONTEND_URL ? "✅ SET" : "❌ MISSING"
  });
});

3. Keys & Values for Deployment → Secrets

Paste these exactly (with your real values where shown):

DATABASE_URL=postgresql://<your-db-user>:<your-db-pass>@<your-db-host>/<your-db-name>
JWT_SECRET=b3fa6a6517f551047b36564d352f043a74b0765cbcbc47c815f03352caf1ac197f270d250ca302ab619241cfea6059d0f21ef462f619e9e667a0598999a1826c
STRIPE_SECRET_KEY=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
STRIPE_PRICE_ID=price_1SCvuYLFiSREHMWwZRRDvyjP
STRIPE_ANNUAL_PRICE_ID=price_1SCw01LFiSREHMWw3W7XyDx5
VITE_STRIPE_PUBLIC_KEY=pk_live_xxxxxxxxxxxxxxxxxxxxx
SUPABASE_URL=https://<your-supabase-project>.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJh...<long service role key>...
FRONTEND_URL=https://www.consentiq.tech

✅ After this package:

Redeploy

Visit /api/env-check

Confirm every line shows ✅ SET